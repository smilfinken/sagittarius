#{set title: "Resultat fr√•n competition.name" /}

<div>
	<h2 style="float: left; width: 49%; text-align: left">
		${competition.name}
	</h2>
	<h2 style="float: right; width: 49%; text-align: right">
		${competition.getDate()}
	</h2>
</div>

<div style="clear: both">
	%{
	int totalHits;
	int totalTargets;
	int totalPoints;
	int place = 1;
	}%
	<table>
		%{
		if (results.size() > 0) {
		String previousClass = "";
		for(entry in results){
		if (entry.results != null && entry.results.size() == competition.stages.size()) {
		if (!entry.getDivision().equals(previousClass)){
		place = 1;
		}%
		<tr style="padding-top: 1 em">
			<td>
				&nbsp;
			</td>
		</tr>
		<tr>
			<th colspan="2" style="text-align: left; width: 20%">
				Klass ${entry.getDivision()}
			</th>
			<th colspan="${competition.stages.size()}" style="text-align: left; width: 40%">
				Stationer
			</th>
			<th colspan="2" style="text-align: left; width: 20%">
				Totalt
			</th>
		</tr>
		%{
		}
		previousClass = entry.getDivision();
		}%
		<tr>
			<td style="font-style: italic; font-weight: bold; text-align: right">${place}</td>
			<td style="font-weight: bold">${entry.getFullName()}</td>
			%{
			totalHits = 0;
			totalTargets = 0;
			totalPoints = 0;
			for(result in entry.results){
			totalHits += result.hits;
			totalTargets += result.targets;
			totalPoints += result.points;
			}%
			<td>
				${result.hits}/${result.targets}
				#{if result.points > 0}(${result.points})#{/if}
			</td>
			%{
			}
			}%
			<td style="font-weight: bold">
				${totalHits}/${totalTargets}
			</td>
			<td style="font-weight: bold">
				${totalHits + totalTargets}&nbsp;(${totalPoints})
			</td>
		</tr>
		%{
		place++;
		}
		}
		}
		}%
	</table>
</div>