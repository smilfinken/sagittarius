#{extends "Competitions/main.html" /}
#{set title: messages.get("competitions.participants") /}

<hr />

<div>
	<form id="register" method="POST">
		<input type="hidden" name="competitionID" value="${competition.id}" />
		<table>
			<tr>
				<td>
					#{include "Common/selectUser.html" /}
				</td>
				<td>
					#{include "Common/selectDivision.html" /}
					<button class="enter" type="submit" formaction="@{Competitions.registerUser()}" #{if (request.headers.get("user-agent").toString().contains("MSIE"))}onClick='document.getElementById("register").action="@{Competitions.registerUser()}"'#{/if}>&{'common.register'}</button>
					<button class="delete" type="submit" formaction="@{Users.delete()}" #{if (request.headers.get("user-agent").toString().contains("MSIE"))}onClick='document.getElementById("register").action="@{Users.delete()}"'#{/if}>&{'users.delete'}</button>
				</td>
			</tr>
		</table>

		<hr />

		<table>
			<tr>
				<td>

					<label for="firstName">&{'models.user.firstname'}</label>
					<input type="text" name="firstName" />
				</td>
				<td>
					<label for="surname">&{'models.user.surname'}</label>
					<input type="text" name="surname" />
				</td>
				<td>
					#{include "Common/selectCategory.html" /}
				</td>
				<td>
					#{include "Common/selectRank.html" /}
				</td>
				<td>
					<button class="enter" type="submit" formaction="@{Users.add}" #{if (request.headers.get("user-agent").toString().contains("MSIE"))}onClick='document.getElementById("user").action="@{Users.add()}"'#{/if}>&{'competitors.createuser'}</button>
				</td>
			</tr>
		</table>

		<hr />

		<table>
			<tr>
				<th style="text-align: left">
					&{'common.name'}
				</th>
				<th style="text-align: left" colspan="2">
					&{'common.division'}
				</th>
			</tr>
			%{
			for (competitor in competitors){
			}%
			<tr>
				<td>
					${competitor.getFullName()}
				</td>
				<td>
					${competitor.getDivision()}
				</td>
				<td>
					<input type="hidden" name="competitorID" value="${competitor.id}" />
					<button class="delete" type="submit" formaction="@{Competitions.unregisterUser()}" #{if (request.headers.get("user-agent").toString().contains("MSIE"))}onClick='document.getElementById("register").action="@{Competitions.unregisterUser()}"'#{/if}>&{'common.unregister'}</button>
				</td>
			</tr>
			%{
			}
			}%
		</table>
	</form>
</div>