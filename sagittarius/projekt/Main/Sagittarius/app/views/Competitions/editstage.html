#{extends "main.html" /}
#{set title: "${competition.name}, station ${stageIndex}" /}
%{
int i = 1;
int j = 1;
%}
<div>
	<h2>${competition.name}, station ${stageIndex}</h2>
	%{
	i = 1;
	for (group in stage.targetGroups) {
	}%
	<table>
		<tr>
			<th colspan=4 style="text-align: left">
		<form action="@{Stages.deleteTargetGroup()}" method="POST">
			<input type="hidden" name="competitionID" value="${competition.id}" />
			<input type="hidden" name="stageID" value="${stage.id}" />
			<input type="hidden" name="stageIndex" value="${stageIndex}" />
			<input type="hidden" name="targetGroupID" value="${group.id}" />
			M책lgrupp ${i++}
			<input class="delete" type="submit" value="Ta bort" />
		</form>
		</th>
		</tr>
		<tr>
			<th style="text-align: left">
				Figur
			</th>
			<th style="text-align: left">
				Typ
			</th>
			<th style="text-align: left">
				F채rg
			</th>
			<th style="text-align: center">
				Po채ngm책l
			</th>
		</tr>

		<form action="@{Competitions.updateStage()}" method="POST">
			<input type="hidden" name="competitionID" value="${competition.id}" />
			<input type="hidden" name="targetGroupID" value="${group.id}" />
			<input type="hidden" name="stageID" value="${stage.id}" />
			%{
			j = 1;
			String checked = "";
			for (target in group.targets) {
			if (target.hasPoints) {
			checked = "checked";
			}
			}%
			<input type="hidden" name="targetID" value="${target.id}" />
			<tr>
				<td style="text-align: left">
					Figur ${j++}
				</td>
				<td style="text-align: left">
					${target.model}
				</td>
				<td style="text-align: left">
				</td>
				<td style="text-align: center">
					<input type="checkbox" ${checked} />
				</td>
			</tr>
			%{
			}
			}%
			%{
			}
			}%
	</table>
	<input class="enter" type="submit" value="Uppdatera" />
</form>
</div>